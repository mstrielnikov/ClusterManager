---

- name: "Configure mysql server"
  hosts: mysql
  become: yes

  tasks:

  - name: "Use generic package manager"
    package_facts:
      manager: auto

  - name: "mysql is installed?"
    debug:
      msg: "mysql found"
    when: "'mysql' in {{ ansible_facts.packages }}"

  - name: "mysql is installed"
    debug:
      msg: "mysql not found"
    when: "'mysql' not in {{ ansible_facts.packages }}"

  - name: "Install mysql"
    package:
      name: mysql
      state: latest

  - name: "enable mysql"
    service:
      name: mysql
      state: started

...
