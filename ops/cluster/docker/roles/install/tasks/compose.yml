---

- name: Check if ansible compose module installed
  pip:
    name: docker-compose

- name: Check current docker-compose version.
  command: docker-compose --version
  register: compose_version
  changed_when: false
  failed_when: false

- name: Check architecture
  shell: uname -a
  register: arch

#  shell: curl -L "https://github.com/docker/compose/releases/download/1.25.3/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && chmod +x /usr/local/bin/docker-compose && ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
- name: Install docker compose
  get_url:
    url: "https://github.com/docker/compose/releases/download/{{ docker_compose_version }}/docker-compose-{{ arch.stdout }}"
    dest: "/usr/local/bin/docker-compose"
    mode: 0755
  when: >
    compose_version.stdout is not defined


...
